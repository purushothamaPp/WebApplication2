trigger:
- main

pr:
- '*'

jobs:
- job: BuildAndPublish
  displayName: 'Build and Publish'
  pool:
    name: 'Default'  # Use the default self-hosted agent pool

  variables:
    solution: '**/*.sln'
    buildConfiguration: 'Release'

  steps:
  - checkout: self

  - task: UseDotNet@2
    inputs:
      packageType: 'sdk'
      version: '6.0.100'  # Use the version of .NET SDK that supports .NET 6.0
      installationPath: $(Agent.ToolsDirectory)/dotnet  # Ensure 'dotnet' is added to the PATH

  - task: NuGetToolInstaller@1
    inputs:
      versionSpec: '5.x.x'  # Use a version that is compatible with your project

  - task: NuGetCommand@2
    inputs:
      restoreSolution: '$(solution)'

  - task: DotNetCoreCLI@2
    displayName: 'Build'
    inputs:
